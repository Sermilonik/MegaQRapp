<!--index.html-->
<!DOCTYPE html>
<html lang="ru">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>QR –°–∫–∞–Ω–µ—Ä –°–∫–ª–∞–¥–∞</title>
        
        <!-- PWA -->
        <link rel="manifest" href="manifest.json">
        <meta name="theme-color" content="#007bff">
        
        <!-- –°—Ç–∏–ª–∏ -->
        <link rel="stylesheet" href="css/styles.css">
        
        <!-- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ -->
        <script src="https://unpkg.com/html5-qrcode"></script>
        
        <!-- bwip-js -->
        <script src="https://cdn.jsdelivr.net/npm/bwip-js@4.2.0/dist/bwip-js.min.js"></script>
        
        <!-- Firebase -->
    </head>
<body>
    <div class="container">
        <header class="header">
            <a href="index.html" class="back-button">‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
            <h1>üì¶ –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–æ–≤</h1>
            <p class="subtitle">–°–∫–ª–∞–¥—Å–∫–æ–π –º–æ–¥—É–ª—å</p>
        </header>

        <!-- –í–´–ë–û–† –ö–û–ù–¢–†–ê–ì–ï–ù–¢–û–í -->
        <div class="card">
            <h3>1. –í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤</h3>
        
            <div class="contractor-search-container">
                <div class="contractor-search">
                    <input type="text" id="contractorSearch" placeholder="üîç –ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞..." 
                           class="form-select" autocomplete="off">
                    <div id="contractorDropdown" class="contractor-dropdown hidden"></div>
                </div>
            </div>
        
            <!-- –ö–ù–û–ü–ö–ò –£–ü–†–ê–í–õ–ï–ù–ò–Ø -->
            <div class="contractor-management-buttons">
                <button class="btn btn-outline btn-sm" id="addManualContractorBtn">
                    ‚ûï –î–æ–±–∞–≤–∏—Ç—å –≤—Ä—É—á–Ω—É—é
                </button>
                <button class="btn btn-outline btn-sm" id="importContractorsBtn">
                    üì• –ò–º–ø–æ—Ä—Ç –∏–∑ CSV
                </button>
                <button class="btn btn-outline btn-sm" id="showContractorManagerBtn">
                    üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞–º–∏
                </button>
            </div>

            <div class="card">
                <div class="card-header">
                    <h3>üóëÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–Ω—ã–º–∏ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞–º–∏</h3>
                </div>
                
                <div class="sync-actions">
                    <button class="btn btn-warning" id="syncDeletedBtn">
                        üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —É–¥–∞–ª–µ–Ω–Ω—ã–µ
                    </button>
                    <button class="btn btn-danger" id="clearDeletedBtn">
                        üßπ –û—á–∏—Å—Ç–∏—Ç—å —Å–ø–∏—Å–æ–∫ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö
                    </button>
                    <button class="btn btn-info" id="showDeletedBtn">
                        üëÅÔ∏è –ü–æ–∫–∞–∑–∞—Ç—å —É–¥–∞–ª–µ–Ω–Ω—ã—Ö
                    </button>
                </div>
                
                <div id="deletedInfo" style="margin-top: 15px; font-size: 12px; color: #666;">
                    <div>üóëÔ∏è –£–¥–∞–ª–µ–Ω–æ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤: <span id="deletedCount">0</span></div>
                    <div>üïê –ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: <span id="deletedLastUpdate">-</span></div>
                </div>
            </div>
        
            <div id="selectedContractors" class="selected-contractors hidden">
                <div class="selected-header">
                    <span>–í—ã–±—Ä–∞–Ω–æ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤: <strong id="selectedCount">0</strong></span>
                    <button class="btn btn-sm btn-outline" id="clearContractors">
                        üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ
                    </button>
                </div>
                <div id="contractorsList" class="contractors-list">
                    <!-- –í—ã–±—Ä–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—ã –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å -->
                </div>
            </div>
        </div>

        <!-- –°–¢–ê–¢–£–° –°–ï–°–°–ò–ò -->
        <div id="sessionStatus" class="card status-card hidden">
            <div class="status-header">
                <span id="statusIcon">üìä</span>
                <h3>–°—Ç–∞—Ç—É—Å —Å–µ—Å—Å–∏–∏</h3>
            </div>
            <div class="status-info">
                <div class="status-item">
                    <span class="label">–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—ã:</span>
                    <span id="currentContractor">-</span>
                </div>
                <div class="status-item">
                    <span class="label">–û—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ:</span>
                    <span id="codesCount" class="badge">0</span>
                </div>
            </div>
        </div>

        <!-- –°–ö–ê–ù–ò–†–û–í–ê–ù–ò–ï -->
        <div class="card">
            <h3>2. –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–æ–≤</h3>
            
            <div class="scan-controls">
                <button id="startCamera" class="btn btn-primary" disabled>
                    <span class="btn-icon">üì∑</span>
                    –í–∫–ª—é—á–∏—Ç—å –∫–∞–º–µ—Ä—É
                </button>
                <button id="stopCamera" class="btn btn-secondary hidden">
                    <span class="btn-icon">‚èπÔ∏è</span>
                    –í—ã–∫–ª—é—á–∏—Ç—å –∫–∞–º–µ—Ä—É
                </button>
                <button id="showSimulator" class="btn btn-outline">
                    <span class="btn-icon">üß™</span>
                    –°–∏–º—É–ª—è—Ç–æ—Ä —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
                </button>
            </div>

            <!-- –ö–û–ù–¢–ï–ô–ù–ï–† –î–õ–Ø –°–ö–ê–ù–ï–†–ê -->
            <div id="scannerContainer" class="scanner-container">
                <div id="reader" class="scanner-placeholder">
                    <div class="scanner-overlay">
                        <span class="placeholder-icon">üì∑</span>
                        <p>–ö–∞–º–µ—Ä–∞ –Ω–µ –∑–∞–ø—É—â–µ–Ω–∞</p>
                        <div class="scanner-frame"></div>
                    </div>
                </div>
            </div>

            <!-- –°–ò–ú–£–õ–Ø–¢–û–† -->
            <div id="simulator" class="simulator hidden">
                <h4>üß™ –¢–µ—Å—Ç–æ–≤—ã–µ QR-–∫–æ–¥—ã</h4>
                <p>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–∏ –∫–æ–¥—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:</p>
                
                <div class="test-codes-grid">
                    <div class="test-code" data-scan="0104604063405720219NQNfSwVmcTEST001">
                        <span class="code-preview">0104604063405720219NQNfSwVmcTEST001</span>
                        <button class="btn btn-sm btn-success">üì¶ –°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å</button>
                    </div>
                    <div class="test-code" data-scan="0104604063405720219NQNfSwVmdTEST002">
                        <span class="code-preview">0104604063405720219NQNfSwVmdTEST002</span>
                        <button class="btn btn-sm btn-success">üì¶ –°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å</button>
                    </div>
                    <div class="test-code" data-scan="0104604063405720219NQNfSwVmeTEST003">
                        <span class="code-preview">0104604063405720219NQNfSwVmeTEST003</span>
                        <button class="btn btn-sm btn-success">üì¶ –°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- –°–ü–ò–°–û–ö –ö–û–î–û–í -->
        <div class="card">
            <div class="card-header">
                <h3>3. –û—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–¥—ã</h3>
                <span id="totalCodes" class="badge">0</span>
            </div>
            
            <div id="codesList" class="codes-list">
                <div class="empty-state">
                    <span class="empty-icon">üì¶</span>
                    <p>–ù–µ—Ç –æ—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ–¥–æ–≤</p>
                    <small>–ù–∞—á–Ω–∏—Ç–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∏–º—É–ª—è—Ç–æ—Ä</small>
                </div>
            </div>
        </div>

        <!-- –î–ï–ô–°–¢–í–ò–Ø -->
        <div class="card">
            <h3>4. –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–∞</h3>
            <div class="actions-grid">
                <button id="generateReport" class="btn btn-success" disabled>
                    <span class="btn-icon">üìÑ</span>
                    –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á–µ—Ç PDF
                </button>
                <button id="clearSession" class="btn btn-danger">
                    <span class="btn-icon">üóëÔ∏è</span>
                    –û—á–∏—Å—Ç–∏—Ç—å —Å–µ—Å—Å–∏—é
                </button>
            </div>
        </div>

        <!-- –ò–°–¢–û–†–ò–Ø –û–¢–ß–ï–¢–û–í -->
        <div class="card">
            <div class="card-header">
                <h3>üìä –ò—Å—Ç–æ—Ä–∏—è –æ—Ç—á–µ—Ç–æ–≤</h3>
            </div>
        
            <div id="reportsList" class="reports-list">
                <div class="empty-state">
                    <span class="empty-icon">üìÑ</span>
                    <p>–ù–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö –æ—Ç—á–µ—Ç–æ–≤</p>
                    <small>–°–æ–∑–¥–∞–Ω–Ω—ã–µ –æ—Ç—á–µ—Ç—ã –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å</small>
                </div>
            </div>
        </div>

        <!-- –°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–Ø –î–ê–ù–ù–´–• -->
        <div class="card">
            <div class="card-header">
                <h3>‚òÅÔ∏è –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏</h3>
                <span id="syncStatus" class="badge badge-warning">‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞...</span>
            </div>
            
            <div class="sync-actions">
                <button class="btn btn-outline" id="exportDataBtn">
                    üì§ –≠–∫—Å–ø–æ—Ä—Ç –≤ —Ñ–∞–π–ª
                </button>
                <button class="btn btn-outline" id="importDataBtn">
                    üì• –ò–º–ø–æ—Ä—Ç –∏–∑ —Ñ–∞–π–ª–∞
                </button>
                <button class="btn btn-success" id="forceSyncBtn">
                    üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å
                </button>
                <button class="btn btn-danger" id="applyDeletedBtn">
                    üóëÔ∏è –ü—Ä–∏–º–µ–Ω–∏—Ç—å —É–¥–∞–ª–µ–Ω–Ω—ã–µ —Å–µ–π—á–∞—Å
                </button>
                <button class="btn btn-info" id="testSyncBtn" style="margin-top: 10px;">
                    üß™ –¢–µ—Å—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
                </button>
            </div>
            
            <div id="syncInfo" style="margin-top: 15px; font-size: 12px; color: #666;">
                <div>üì± ID —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞: <span id="deviceId">-</span></div>
                <div>üë§ Firebase User ID: <span id="userId">-</span></div>
                <div>üë• –í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: <span id="usersCount">-</span></div>
                <div>üïê –ü–æ—Å–ª–µ–¥–Ω—è—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è: <span id="lastSync">-</span></div>
                <div>üìä –°—Ç–∞—Ç—É—Å: <span id="firebaseStatus">-</span></div>
                <div>üìÅ –ü—É—Ç—å: <span id="firebasePath">-</span></div>
            </div>
            
            <!-- –Ω–æ–≤—ã–µ –∫–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è: -->
            <div class="sync-management" style="margin-top: 15px;">
                <button class="btn btn-info btn-sm" id="showUsersBtn">
                    üë• –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
                </button>
                <button class="btn btn-warning btn-sm" id="clearFirebaseIdBtn">
                    üîÑ –°–±—Ä–æ—Å–∏—Ç—å Firebase ID
                </button>
            </div>
        </div>
    
    <!-- –ö–û–ù–¢–ï–ô–ù–ï–† –î–õ–Ø –£–í–ï–î–û–ú–õ–ï–ù–ò–ô -->
    <div id="notificationContainer"></div>

    <!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –£–ü–†–ê–í–õ–ï–ù–ò–Ø –ö–û–ù–¢–†–ê–ì–ï–ù–¢–ê–ú–ò -->
    <div id="contractorManager" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞–º–∏</h3>
                <button class="btn btn-sm btn-secondary" id="hideContractorManagerBtn">
                    ‚úï –ó–∞–∫—Ä—ã—Ç—å
                </button>
            </div>
            
            <div class="modal-body">
                <div class="quick-actions">
                    <button class="btn btn-success" id="showAddContractorFormBtn">‚ûï –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞</button>
                    <button class="btn btn-outline" id="showImportFormBtn">üì• –ò–º–ø–æ—Ä—Ç –∏–∑ CSV</button>
                </div>
                
                <!-- –§–û–†–ú–ê –î–û–ë–ê–í–õ–ï–ù–ò–Ø –ö–û–ù–¢–†–ê–ì–ï–ù–¢–ê -->
                <div id="addContractorForm" class="form-section hidden">
                    <h4>–î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞</h4>
                    <div class="form-group">
                        <label>–ù–∞–∑–≤–∞–Ω–∏–µ:</label>
                        <input type="text" id="contractorNameInput" class="form-select" placeholder="–û–û–û –†–æ–º–∞—à–∫–∞">
                    </div>
                    <div class="form-group">
                        <label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</label>
                        <input type="text" id="contractorCategoryInput" class="form-select" placeholder="–û–ø—Ç–æ–≤—ã–π –ø–æ–∫—É–ø–∞—Ç–µ–ª—å">
                    </div>
                    <div class="form-actions">
                        <button class="btn btn-success" id="addContractorBtn">‚úÖ –î–æ–±–∞–≤–∏—Ç—å</button>
                        <button class="btn btn-outline" id="hideAddContractorFormBtn">‚ùå –û—Ç–º–µ–Ω–∞</button>
                    </div>
                </div>
                
                <!-- –§–û–†–ú–ê –ò–ú–ü–û–†–¢–ê -->
                <div id="importForm" class="form-section hidden">
                    <h4>–ò–º–ø–æ—Ä—Ç –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤</h4>
                    <div class="form-group">
                        <label>CSV –¥–∞–Ω–Ω—ã–µ (–ù–∞–∑–≤–∞–Ω–∏–µ,–ö–∞—Ç–µ–≥–æ—Ä–∏—è):</label>
                        <textarea id="importDataTextarea" class="form-select" rows="6" placeholder="–û–û–û –†–æ–º–∞—à–∫–∞,–û–ø—Ç–æ–≤—ã–π –ø–æ–∫—É–ø–∞—Ç–µ–ª—å
–ò–ü –ò–≤–∞–Ω–æ–≤,–†–æ–∑–Ω–∏—á–Ω–∞—è —Å–µ—Ç—å
–û–û–û –õ—É—á,–î–∏–ª–µ—Ä"></textarea>
                    </div>
                    <div class="form-actions">
                        <button class="btn btn-primary" id="importContractorsBtn2">üì• –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                        <button class="btn btn-outline" id="hideImportFormBtn">‚ùå –û—Ç–º–µ–Ω–∞</button>
                    </div>
                </div>
                
                <!-- –°–ü–ò–°–û–ö –ö–û–ù–¢–†–ê–ì–ï–ù–¢–û–í -->
                <div class="contractors-list-section">
                    <h4>–°–ø–∏—Å–æ–∫ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤</h4>
                    <div class="search-box">
                        <input type="text" id="managerSearch" placeholder="üîç –ü–æ–∏—Å–∫ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤..." class="form-select">
                    </div>
                    <div id="contractorsManagerList" class="contractors-manager-list">
                        <!-- –°–ø–∏—Å–æ–∫ –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--–°–∏–Ω—Ö—Ä–æ-->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>

    <!-- Firebase-->
    <script src="js/firebase-config.js"></script>

    <!-- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è PDF –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.min.js"></script>

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º —Å–∫—Ä–∏–ø—Ç—ã -->
    <script src="js/utils.js"></script>
    <script src="js/app-state.js"></script>
    <script src="js/firebase-sync.js"></script>
    <script src="js/pdf-generator-bwip.js"></script>
    <script src="js/scanner.js"></script>

    <!--–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è-->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üìÑ DOM –∑–∞–≥—Ä—É–∂–µ–Ω');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
            console.log('üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫:');
            console.log('- Html5Qrcode:', typeof Html5Qrcode !== 'undefined' ? '‚úÖ' : '‚ùå');
            console.log('- Firebase:', typeof firebase !== 'undefined' ? '‚úÖ' : '‚ùå');
            console.log('- AppState:', typeof AppState !== 'undefined' ? '‚úÖ' : '‚ùå');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é
            setTimeout(() => {
                if (typeof ScannerManager !== 'undefined' && !window.scannerManager) {
                    try {
                        window.scannerManager = new ScannerManager();
                        console.log('‚úÖ ScannerManager –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
                        showSuccess('–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –∫ —Ä–∞–±–æ—Ç–µ!', 3000);
                    } catch (error) {
                        console.error('‚ùå –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ ScannerManager:', error);
                        showError('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: ' + error.message);
                    }
                }
            }, 1000);
        });
    </script>

<script>
    // –ö–æ–¥ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∫–Ω–æ–ø–æ–∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞–º–∏
    document.addEventListener('DOMContentLoaded', function() {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—Å–µ –∫–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞–º–∏
        const contractorButtons = [
            'addManualContractorBtn',
            'importContractorsBtn',
            'showContractorManagerBtn',
            'clearContractors',
            'hideContractorManagerBtn',
            'hideAddContractorFormBtn',
            'addContractorBtn',
            'importContractorsBtn2',
            'hideImportFormBtn',
            'showAddContractorFormBtn',
            'showImportFormBtn'
        ];
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∫–∞–∫–∏–µ –∫–Ω–æ–ø–∫–∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ DOM
        setTimeout(() => {
            console.log('üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–Ω–æ–ø–æ–∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞–º–∏:');
            contractorButtons.forEach(btnId => {
                const btn = document.getElementById(btnId);
                console.log(`${btn ? '‚úÖ' : '‚ùå'} ${btnId}: ${btn ? '–Ω–∞–π–¥–µ–Ω–∞' : '–Ω–µ –Ω–∞–π–¥–µ–Ω–∞'}`);
            });
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞
            console.log('üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω:');
            const contractorManager = document.getElementById('contractorManager');
            console.log(`–ú–µ–Ω–µ–¥–∂–µ—Ä –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤: ${contractorManager ? '–Ω–∞–π–¥–µ–Ω' : '–Ω–µ –Ω–∞–π–¥–µ–Ω'}`);
            
            // –ï—Å–ª–∏ ScannerManager –µ—â–µ –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
            if (!window.scannerManager) {
                console.warn('‚ö†Ô∏è ScannerManager –µ—â–µ –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
                const scannerSection = document.querySelector('#scannerSection');
                if (scannerSection) {
                    scannerSection.innerHTML = `
                        <div class="alert alert-warning">
                            <h4>–û–∂–∏–¥–∞–Ω–∏–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏</h4>
                            <p>ScannerManager –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è...</p>
                            <button onclick="location.reload()" class="btn btn-sm btn-primary">
                                –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É
                            </button>
                        </div>
                    `;
                }
            }
        }, 1000);
    });
    </script>
</body>
</html>
